<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Directory listing for {{.Path}}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .list { list-style: none; padding: 0; }
        .list li { 
            padding: 8px; 
            border-bottom: 1px solid #eee; 
            display: flex; 
            align-items: center;
            justify-content: space-between;
        }
        .list li:hover { background-color: #f5f5f5; }
        .dir { color: #2c3e50; font-weight: bold; }
        .file { color: #34495e; }
        .size { color: #7f8c8d; margin-left: 10px; }
        .time { color: #95a5a6; margin-left: 10px; }
        .empty-message { color: #666; text-align: center; padding: 20px; }
        .file-info { 
            display: flex;
            align-items: center;
            flex: 1;
        }
        .delete-btn {
            visibility: hidden;
            padding: 4px 8px;
            background-color: #ef4444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: background-color 0.2s;
        }
        .list li:hover .delete-btn { 
            visibility: visible; 
        }
        .delete-btn:hover { 
            background-color: #dc2626; 
        }
        .delete-btn svg {
            width: 16px;
            height: 16px;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            padding: 8px 0;
            margin-bottom: 16px;
            border-bottom: 1px solid #eee;
        }
        .breadcrumb-item {
            display: flex;
            align-items: center;
        }
        .breadcrumb-item a {
            color: #3b82f6;
            text-decoration: none;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .breadcrumb-item a:hover {
            background-color: #f0f9ff;
        }
        .breadcrumb-separator {
            color: #9ca3af;
            margin: 0 4px;
        }
        .breadcrumb-current {
            color: #4b5563;
            padding: 4px 8px;
        }
    </style>
    <script>
        function deleteFile(path, event) {
            event.preventDefault();
            event.stopPropagation();
            
            if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Êñá‰ª∂ÂêóÔºü')) {
                return;
            }

            fetch('/browse/' + path, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    window.location.reload();
                } else {
                    alert('Âà†Èô§Â§±Ë¥•: ' + response.statusText);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Âà†Èô§Â§±Ë¥•: ' + error.message);
            });
        }
    </script>
</head>
<body>
    <div class="breadcrumb">
        <div class="breadcrumb-item">
            <a href="/browse/">Ê†πÁõÆÂΩï</a>
        </div>
        {{if ne .Path "."}}
            {{$paths := .BreadcrumbPaths}}
            {{range $index, $element := $paths}}
                <span class="breadcrumb-separator">/</span>
                <div class="breadcrumb-item">
                    {{if eq $index (len $paths)}}
                        <span class="breadcrumb-current">{{$element.Name}}</span>
                    {{else}}
                        <a href="/browse/{{$element.Path}}">{{$element.Name}}</a>
                    {{end}}
                </div>
            {{end}}
        {{end}}
    </div>
    <h1>Directory listing for {{.Path}}</h1>
    {{if .Files}}
    <ul class="list">
        {{if ne .Path "."}}
        <li>
            <div class="file-info">
                <a href="/browse/{{.ParentPath}}" class="dir">üìÅ ..</a>
            </div>
        </li>
        {{end}}
        {{range .Files}}
        <li>
            <div class="file-info">
                {{if .IsDir}}
                <a href="/browse/{{.Path}}" class="dir">üìÅ {{.Name}}/</a>
                {{else}}
                <a href="/browse/{{.Path}}" class="file">üìÑ {{.Name}}</a>
                <span class="size">{{.FormatSize}}</span>
                {{end}}
                <span class="time">{{.ModTime}}</span>
            </div>
            {{if not .IsDir}}
            <button onclick="deleteFile('{{.Path}}', event)" class="delete-btn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                    </path>
                </svg>
                Âà†Èô§
            </button>
            {{end}}
        </li>
        {{end}}
    </ul>
    {{else}}
    <p class="empty-message">Ê≠§Êñá‰ª∂Â§π‰∏∫Á©∫</p>
    {{end}}
</body>
</html> 