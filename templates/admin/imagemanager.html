{{define "admin/imagemanager"}}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">图片管理</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-primary btn-sm" id="btnUpload">
                            <i class="fas fa-upload"></i> 上传图片
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-12">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb" id="pathBreadcrumb">
                                    <li class="breadcrumb-item"><a href="#" data-path="./">根目录</a></li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                    <div class="row" id="imageGrid">
                        <!-- Images will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Upload Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">上传图片</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="uploadForm">
                    <div class="form-group">
                        <label>选择图片</label>
                        <input type="file" class="form-control-file" id="imageInput" name="file" accept="image/*" required>
                        <small class="form-text text-muted">支持 JPG、JPEG、PNG、GIF 格式</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnConfirmUpload">上传</button>
            </div>
        </div>
    </div>
</div>

<!-- Rename Modal -->
<div class="modal fade" id="renameModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">重命名图片</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="renameForm">
                    <div class="form-group">
                        <label>新名称</label>
                        <input type="text" class="form-control" id="newName" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnConfirmRename">重命名</button>
            </div>
        </div>
    </div>
</div>

<!-- Move/Copy Modal -->
<div class="modal fade" id="moveModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">移动/复制图片</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="moveForm">
                    <div class="form-group">
                        <label>目标路径</label>
                        <input type="text" class="form-control" id="destPath" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnConfirmMove">移动</button>
                <button type="button" class="btn btn-info" id="btnConfirmCopy">复制</button>
            </div>
        </div>
    </div>
</div>

<!-- Image Preview Modal -->
<div class="modal fade" id="previewModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">图片预览</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <img id="previewImage" class="img-fluid" src="" alt="Preview">
                <div class="mt-3">
                    <p id="imageInfo"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <a href="#" class="btn btn-primary" id="btnDownload" download>下载</a>
            </div>
        </div>
    </div>
</div>

<style>
.image-card {
    position: relative;
    margin-bottom: 20px;
}

.image-card .card-img-top {
    height: 200px;
    object-fit: cover;
}

.image-card .card-actions {
    position: absolute;
    top: 0;
    right: 0;
    padding: 5px;
    background: rgba(0, 0, 0, 0.5);
    display: none;
}

.image-card:hover .card-actions {
    display: block;
}

.image-card .card-actions .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    margin-left: 2px;
}
</style>
{{end}} 